import{d as F,x as K,G as J,g as k,i as u,A as Y,J as U,y as n,r as q,o as i,b as r,f as e,u as _,t as p,F as L,D as z,K as f,w as g,L as Z,e as Q,h as H,N as W,O as x,C as X,S as j,M as $,P as T,Q as ee,s as te,v as ae,R as le,_ as se}from"./index-BjaG5nMZ.js";const w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEe0lEQVR4nN1av2tUQRAeIaDGIkpAwbsE1MJGCzHkQAwGrFN4tWJjo5CAiCaNSLBJDCJ4hRaCCNZn4T+QwiZBsbIW1BMMgr8wIgTifHe75N3e7Lu3v3IXP/iK2/fevPl2Z+ftzt7A08YmJUKJOc48wSwrDqpr68yPzE/Md8xVZiOFEwMJbELYNLOScw+EHlc8r9pWmDWKLDSmwCLC8lBRrCtGERpLIEIR4soRbFWVPYzmaqixGALPMu8WuA/zTY8KRjuvM3BtkXmb+SrEuVCB6Ok8cQg1zC3bSOB5hGXVch22ZylgJEMEYhQWLdeKJoxVRXSEbf7iHRfJc06GCJy2tD9kvnC0BefnmBeYM5Z3zZEHfAXCEam3fcRloZ81RVbUO51t+wqU5kydwsRpwEZZeEeVtkngOHVmQGTIGsVDTXhPWbU5JRwfgVJo1ik+YFMK1eQCzxm/NyhOaJqAzWvU7iPe7RQprgIPMIeNtuDVRg5g+0zm97Dy4VtRA64CjwltSXYBObbhw+uiBlwF7hXaPlM6SLYlH6xwFbhHaPtF6SDZlnywwlXgutB2kNJBsi35YIWrwK9C2yFKB8m25IMVrgI/MFHj2JVpO0npYNreVD4UhqvAP9TKbNkVxlFq7SxiZ9OSsp1FQ/lQGD4fenybzKUa1okxl2rapvRuJ/gIrJO8EI5WR6HW6NkW9E7wEQgR2NCaa9IF5iWKgwWhbYU8OtB3u4RwNAUibJeYNykMSyTXa7ymgK9A9KQUqmPU6n2f+qYuO44J17zDP6RkIe3ZAF3fdNnd20oVQNBeM7SqhjrJfZI/yDOKL5lvme+Z39W1/cwjzFPMqRz7X8izFqMRKhBhc4NaYWmrc05RvggbMHJzFJiZYxR+dUXsOcVDFHFAjMIvEo3veYQNiAZ0GD4NSDDbXviNeRaRB52wdKJJvpJBKr/OPO3wzF/aCjW9gT2csbe7gA19VvGG+YAcQtdFYF4qzwK9jZ7WK49uzpQUMVLSZycLdCxCt/AnqKhAhGO1yz2+53q6E3T46XVo3vvQ0eiIrt/HbgL3UesIy5ZEfjCfUdyyIcTWFBE1l5lDwn3oAHQGTqB+24x1E/iY7CET9STWAnQcRtY2ouh4+Ghd5OcJzPt4B53ZOUKPKOa0dFwHH+GruOKxCbSd1SEL3qK0o2YDOhTnhPdoKwtrwFf43DEnJYGIeykcIO4q8yf1Dg3lwyPqFAmfkcHb8oEpEJP2imBYL516KU4DPiCKpCkE39v+c2MKxDAPUieirAsjwrb+he9tp8FZgfoPASZmqb/EacAn+GYmHr1gaCbBrEBp3i3T9mVLH8C3Zeak0V4lQ6BeKpl4Qv0P+DhptEFLs1arBdpKdP0YmiZs9aFmrVYLHBceTHEsnQqSwKYmCJT+VuVVg+whpFotNJUgcEJ4YIV2HqRi9AQEjgg393PmtEHyecQmcCeFp4bkc1PgqHAhezawQf2NvB3RKC5Km8nYVbJeYSjFf7b7ChC4Rmn/SNBLrEHgPPMO/X8iMXDz/wAiqusPTmWIpwAAAABJRU5ErkJggg==",A=C=>(te("data-v-b840fc84"),C=C(),ae(),C),oe={class:"header"},ne={class:"content"},ue={key:0,class:"select alt-switch"},ie=["value"],re={value:"default"},ce=["value"],ve={key:0,class:"logged fetching"},de={class:"avatar"},me=["src"],_e=["src"],pe=A(()=>e("p",null,null,-1)),ge={class:"avatar"},Ae=["src","alt"],Ce=["src","alt"],he={key:2,class:"not-logged"},Ee=A(()=>e("div",{class:"footer"},[e("div",{class:"content"},[e("p",null,[le("Powered by "),e("a",{href:"https://hs-compendium.com/",target:"_blank"},"HS Compendium")])])],-1)),Ie={class:"input"},fe={class:"name"},we={class:"error-msg"},Ne=A(()=>e("a",{href:"https://hs-compendium.com/",target:"_blank"},"HS Compendium",-1)),Se={class:"select switch-client"},Re=A(()=>e("option",{value:0},"Default client",-1)),De=A(()=>e("option",{value:1},"Client from Mentalisit",-1)),be=[Re,De],Oe=F({__name:"CompendiumPage",setup(C){const y=/[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}/,N=K(),h=J(),{t:E}=k(),c=u(!1),v=u(""),I=u(""),s=u(!1),o=u(),d=u(),S=u(parseInt(localStorage.getItem("compendium_client"))??0);Y(async()=>{s.value=!0,await U();const l=n.value.getUser();s.value=!1,console.log(n.value,l),l?(o.value=l,d.value=n.value.getGuild()):(c.value=!0,"c"in h.currentRoute.value.query&&(v.value=h.currentRoute.value.query.c),"client"in h.currentRoute.value.query&&(defaultSwitchclient.value.value=parseInt(h.currentRoute.value.query.client,10)))});async function B(){let l;if(!v.value){I.value=E("CANNOT_BE_EMPTY");return}if(!y.test(v.value)){I.value=E("INCORRECT_CODE");return}s.value=!0;try{l=await n.value.checkConnectCode(v.value)}catch(m){I.value=m.toString(),console.error(m),s.value=!1;return}s.value=!1,c.value=!1,await N.dispatch(T.OPEN_CONFIRM,E("CONFIRM_LOGIN",[l.guild.name,l.user.username])).catch(()=>(c.value=!0,!0))||(s.value=!0,await n.value.connect(l),o.value=n.value.getUser(),d.value=n.value.getGuild(),s.value=!1)}function P(l){n.value.switchAlt(l)}function V(l){s.value=!0,ee(l).then(()=>{s.value=!1})}function G(){N.dispatch(T.OPEN_CONFIRM,E("TID_SETTINGS_DLG_SIGN_OUT")).then(()=>{n.value.logout(),o.value=void 0,d.value=void 0}).catch(()=>{})}return(l,t)=>{var R,D,b,O;const m=q("t");return i(),r("div",null,[e("div",oe,[e("div",ne,[e("div",null,[(D=(R=o.value)==null?void 0:R.alts)!=null&&D.length?(i(),r("div",ue,[e("select",{value:_(n).selectedAlt,onChange:t[0]||(t[0]=a=>P(a.target.value))},[e("option",re,p((b=o.value)==null?void 0:b.username),1),(i(!0),r(L,null,z((O=o.value)==null?void 0:O.alts,(a,M)=>(i(),r("option",{key:M,value:a},p(a),9,ce))),128))],40,ie)])):f("",!0)]),s.value&&!o.value?(i(),r("div",ve,[e("div",de,[e("img",{src:_(w),alt:"memberImage avatar"},null,8,me),e("img",{src:_(w),alt:"memberImage avatar"},null,8,_e)]),pe])):f("",!0),o.value?(i(),r("div",{key:1,class:"logged",onClick:G},[e("div",ge,[e("img",{src:d.value.url,alt:`${d.value.name} icon`,onError:t[1]||(t[1]=a=>a.target.src=_(w))},null,40,Ae),e("img",{src:o.value.avatarUrl,alt:`${o.value.username} avatar`,onError:t[2]||(t[2]=a=>a.target.src=_(w))},null,40,Ce)]),e("div",null,[e("p",null,p(d.value.name),1),e("p",null,p(o.value.username),1)])])):f("",!0),!s.value&&!o.value?(i(),r("div",he,[g(e("span",null,null,512),[[m,"TID_SETTINGS_DLG_NOT_SIGNED_IN"]]),e("button",{class:"button accent",onClick:t[3]||(t[3]=a=>c.value=!0)},p(l.$t("TID_SETTINGS_DLG_SIGN_IN")),1)])):f("",!0)])]),Z(l.$slots,"default",{},void 0,!0),Ee,Q($,{open:c.value,"onUpdate:open":t[7]||(t[7]=a=>c.value=a),title:l.$t("TID_SETTINGS_DLG_SIGN_IN"),size:_(j).SMALL},{body:H(()=>[e("div",Ie,[e("p",fe,[g(e("span",null,null,512),[[m,"ENTER_CODE"]]),e("span",we,p(I.value),1)]),g(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>v.value=a)},null,512),[[W,v.value]])]),Ne,e("div",Se,[g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>S.value=a),onChange:t[6]||(t[6]=a=>V(a.target.value))},be,544),[[x,S.value]])]),e("div",{class:X(["code-req-btn-wrap",{disable:s.value}])},[g(e("button",{class:"button accent",onClick:B},null,512),[[m,"TID_LINK_DEVICE_DLG_SUBMIT_CODE_BTN"]])],2)]),_:1},8,["open","title","size"])])}}}),ye=se(Oe,[["__scopeId","data-v-b840fc84"]]);export{ye as C,w as m};
