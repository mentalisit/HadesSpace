import{a as q,s as z}from"./sec2str-lJlo5mkX.js";import{d as D,aO as U,aP as F,a as I,o as i,b as u,f as s,F as S,D as V,C as W,t as v,_ as E,i as h,r as y,w as P,L as x,aQ as N,N as G,aI as H,K as T,e as C,h as J,aD as K,s as B,v as j,B as b,A as Q,u as w,R as O}from"./index-ClgqXWXY.js";const Y={class:"pagination"},X=["onClick"],A=2,Z=D({__name:"Pagination",props:U({maxPage:{}},{modelValue:{default:1,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const d=r,a=F(r,"modelValue",{set(t){return t<1&&(t=1),t>d.maxPage&&(t=d.maxPage),t}}),c=I(()=>{let t=Math.max(a.value-A,1),l=Math.min(a.value+A,d.maxPage);return l-t+1<5&&(t===1?l=Math.min(d.maxPage,t+4):l===d.maxPage&&(t=Math.max(1,l-4))),Array.from({length:l-t+1},(m,p)=>t+p)});return(t,l)=>(i(),u("ul",Y,[s("li",{class:"arrow prev",onClick:l[0]||(l[0]=m=>a.value=a.value-1)}),(i(!0),u(S,null,V(c.value,m=>(i(),u("li",{key:m,class:W({selected:m===t.$props.modelValue}),onClick:p=>a.value=m},v(m),11,X))),128)),s("li",{class:"arrow next",onClick:l[1]||(l[1]=m=>a.value=a.value+1)})]))}}),L=E(Z,[["__scopeId","data-v-2bf6673e"]]),ee=r=>(B("data-v-a8cdb687"),r=r(),j(),r),se={class:"label"},te={key:0},ae={key:1},le=ee(()=>s("div",{class:"arrow"},null,-1)),oe={key:0,class:"multiselect_list"},ne=["onClick"],ie=["checked"],ue={class:"label"},re=D({__name:"MultiSelect",props:U({options:{},displayField:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const d=r,a=F(r,"modelValue"),c=h(!1),t=h(),l=h(),m=I(()=>d.options.filter(e=>{var o,g;return(g=e[d.displayField])==null?void 0:g.toLowerCase().includes((o=l.value)==null?void 0:o.toLowerCase())}));function p(){var e;c.value=!c.value,c.value&&(l.value="",(e=t.value)==null||e.focus())}function f(e){a.value.includes(e)?a.value.splice(a.value.indexOf(e),1):a.value.push(e)}function k(){a.value=[]}return(e,o)=>{const g=y("t"),$=y("click-outside");return P((i(),u("div",{class:W(["multiselect",{__active:c.value}])},[x(e.$slots,"default",{selected:a.value,toggleDropdown:p},()=>[s("button",{class:"multiselect_btn",onClick:p},[P(s("input",{ref_key:"filterInput",ref:t,"onUpdate:modelValue":o[0]||(o[0]=_=>l.value=_),type:"text",onClick:o[1]||(o[1]=N(()=>{},["stop"]))},null,512),[[G,l.value]]),P(s("div",se,[x(e.$slots,"label",{},()=>[a.value.length?(i(),u("p",te,v(e.$t("SELECTED",[a.value.length])),1)):P((i(),u("p",ae,null,512)),[[g,"SELECT"]])],!0)],512),[[H,!c.value]]),c.value?T("",!0):(i(),u("div",{key:0,class:"clear",onClick:N(k,["stop"])})),le])],!0),C(K,{name:"list"},{default:J(()=>[c.value?(i(),u("ul",oe,[(i(!0),u(S,null,V(m.value,(_,n)=>(i(),u("li",{key:n,onClick:$e=>f(_)},[s("input",{type:"checkbox",checked:e.$props.modelValue.includes(_)},null,8,ie),s("span",ue,v(_[e.$props.displayField]),1)],8,ne))),128))])):T("",!0)]),_:1})],2)),[[$,()=>c.value=!1]])}}}),de=E(re,[["__scopeId","data-v-a8cdb687"]]),M=r=>(B("data-v-d7995418"),r=r(),j(),r),ce={class:"filters"},pe={class:"label"},me={class:"list"},ve={class:"corp-names"},_e=M(()=>s("span",{class:"vs-icon"},null,-1)),fe={class:"score"},he=M(()=>s("span",null," - ",-1)),ge={key:0},we={key:1},Pe=M(()=>s("div",{class:"footer"},[s("div",{class:"content"},[s("p",null,[O("Powered by "),s("a",{href:"https://ws.mentalisit.myds.me",target:"_blank"},"ws.mentalisit.myds.me"),O(" API ")])])],-1)),R="https://ws.mentalisit.myds.me/",ke=D({__name:"WSMatches",setup(r){const d=new URL("matches",R),a=new URL("corps",R),c=new Date,t=h(),l=h([]),m=I(()=>{var e;return(((e=t.value)==null?void 0:e.matches)||[]).map(o=>({...o,DateEnded:new Date(o.DateEnded)}))}),p=h(1),f=h([]);d.searchParams.set("limit","50"),b(p,()=>{window.scrollTo({top:0,behavior:"smooth"}),d.searchParams.set("page",p.value.toString()),k()},{immediate:!0}),b(f,()=>{f.value.length==0?d.searchParams.delete("filter"):d.searchParams.set("filter",JSON.stringify({corp:f.value})),p.value=1,k()},{deep:!0}),Q(async()=>{l.value=await fetch(a).then(e=>e.json()).then(e=>e.matches)});async function k(){t.value=await fetch(d).then(e=>e.json())}return(e,o)=>{var $,_;const g=y("t");return i(),u("div",null,[s("div",ce,[s("div",null,[P(s("p",pe,null,512),[[g,"TID_OTHER_PLAYER_INFO_PAGE_CORP_SECTION"]]),C(de,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=n=>f.value=n),options:l.value,"display-field":"Name"},null,8,["modelValue","options"])])]),C(L,{modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=n=>p.value=n),"max-page":(($=t.value)==null?void 0:$.MaxPage)||1},null,8,["modelValue","max-page"]),s("ul",me,[(i(!0),u(S,null,V(m.value,n=>(i(),u("li",{key:n.MatchId},[s("div",null,[s("p",ve,[s("span",null,v(n.Corporation1Name),1),_e,s("span",null,v(n.Corporation2Name),1)]),s("p",fe,[s("span",null,v(n.Corporation1Score),1),he,s("span",null,v(n.Corporation2Score),1)]),n.DateEnded-w(c)>0?(i(),u("p",ge,[s("span",null,v(e.$t("TID_WS_PREPARATION_ENDS_IN",[w(q)((n.DateEnded-w(c))/1e3)])),1)])):(i(),u("p",we,[s("span",null,v(e.$t("TID_WS_ENDED"))+" "+v(`(${e.$t("TID_SOCIAL_TIMESTAMP",[w(z)((w(c)-n.DateEnded)/1e3)])})`),1)]))])]))),128))]),C(L,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=n=>p.value=n),"max-page":((_=t.value)==null?void 0:_.MaxPage)||1},null,8,["modelValue","max-page"]),Pe])}}}),De=E(ke,[["__scopeId","data-v-d7995418"]]);export{De as default};
