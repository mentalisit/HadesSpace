import{d as K,g as q,i,a as O,y as J,G as U,J as Y,v as u,s as L,x as z,K as k,L as Z,b as c,f as e,N as B,e as H,O as w,u as C,t as v,w as _,D as Q,h as W,M as x,o as d,F as X,B as j,P as $,C as ee,A as te,S as ae,r as le,_ as se}from"./index-KKScdRr6.js";const N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEe0lEQVR4nN1av2tUQRAeIaDGIkpAwbsE1MJGCzHkQAwGrFN4tWJjo5CAiCaNSLBJDCJ4hRaCCNZn4T+QwiZBsbIW1BMMgr8wIgTifHe75N3e7Lu3v3IXP/iK2/fevPl2Z+ftzt7A08YmJUKJOc48wSwrDqpr68yPzE/Md8xVZiOFEwMJbELYNLOScw+EHlc8r9pWmDWKLDSmwCLC8lBRrCtGERpLIEIR4soRbFWVPYzmaqixGALPMu8WuA/zTY8KRjuvM3BtkXmb+SrEuVCB6Ok8cQg1zC3bSOB5hGXVch22ZylgJEMEYhQWLdeKJoxVRXSEbf7iHRfJc06GCJy2tD9kvnC0BefnmBeYM5Z3zZEHfAXCEam3fcRloZ81RVbUO51t+wqU5kydwsRpwEZZeEeVtkngOHVmQGTIGsVDTXhPWbU5JRwfgVJo1ik+YFMK1eQCzxm/NyhOaJqAzWvU7iPe7RQprgIPMIeNtuDVRg5g+0zm97Dy4VtRA64CjwltSXYBObbhw+uiBlwF7hXaPlM6SLYlH6xwFbhHaPtF6SDZlnywwlXgutB2kNJBsi35YIWrwK9C2yFKB8m25IMVrgI/MFHj2JVpO0npYNreVD4UhqvAP9TKbNkVxlFq7SxiZ9OSsp1FQ/lQGD4fenybzKUa1okxl2rapvRuJ/gIrJO8EI5WR6HW6NkW9E7wEQgR2NCaa9IF5iWKgwWhbYU8OtB3u4RwNAUibJeYNykMSyTXa7ymgK9A9KQUqmPU6n2f+qYuO44J17zDP6RkIe3ZAF3fdNnd20oVQNBeM7SqhjrJfZI/yDOKL5lvme+Z39W1/cwjzFPMqRz7X8izFqMRKhBhc4NaYWmrc05RvggbMHJzFJiZYxR+dUXsOcVDFHFAjMIvEo3veYQNiAZ0GD4NSDDbXviNeRaRB52wdKJJvpJBKr/OPO3wzF/aCjW9gT2csbe7gA19VvGG+YAcQtdFYF4qzwK9jZ7WK49uzpQUMVLSZycLdCxCt/AnqKhAhGO1yz2+53q6E3T46XVo3vvQ0eiIrt/HbgL3UesIy5ZEfjCfUdyyIcTWFBE1l5lDwn3oAHQGTqB+24x1E/iY7CET9STWAnQcRtY2ouh4+Ghd5OcJzPt4B53ZOUKPKOa0dFwHH+GruOKxCbSd1SEL3qK0o2YDOhTnhPdoKwtrwFf43DEnJYGIeykcIO4q8yf1Dg3lwyPqFAmfkcHb8oEpEJP2imBYL516KU4DPiCKpCkE39v+c2MKxDAPUieirAsjwrb+he9tp8FZgfoPASZmqb/EacAn+GYmHr1gaCbBrEBp3i3T9mVLH8C3Zeak0V4lQ6BeKpl4Qv0P+DhptEFLs1arBdpKdP0YmiZs9aFmrVYLHBceTHEsnQqSwKYmCJT+VuVVg+whpFotNJUgcEJ4YIV2HqRi9AQEjgg393PmtEHyecQmcCeFp4bkc1PgqHAhezawQf2NvB3RKC5Km8nYVbJeYSjFf7b7ChC4Rmn/SNBLrEHgPPMO/X8iMXDz/wAiqusPTmWIpwAAAABJRU5ErkJggg==",ne={class:"header"},ue={class:"content"},oe={key:0,class:"select alt-switch"},re=["value"],ie={value:"default"},ce=["value"],ve={key:0,class:"logged fetching"},de={class:"avatar"},me=["src"],ge=["src"],pe={class:"avatar"},Ae=["src","alt"],Ce=["src","alt"],_e={key:2,class:"not-logged"},Ee={class:"footer"},Ie={class:"content"},fe=["href"],he={class:"input"},we={class:"name"},Ne={class:"error-msg"},Re=["href"],Se={class:"select switch-client"},De=K({__name:"CompendiumPage",setup(ye){const G=/[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}/,R=L(),o=Y(),{t:E}=q(),m=i(!1),g=i(""),I=i(""),s=i(!1),n=i(),p=i(),r=i(localStorage.getItem("compendium_client")?parseInt(localStorage.getItem("compendium_client"),10):0),S=O(()=>r.value===0?"https://hs-compendium.com/":"https://compendiumnew.mentalisit.myds.me/links"),P=O(()=>r.value===0?"HS Compendium":"invite");J(async()=>{if(s.value=!0,await U(),"secretToken"in o.currentRoute.value.query){const t={token:o.currentRoute.value.query.secretToken,guild:{url:"",id:"",name:"",icon:""}};r.value=1,f(1),await u.value.connect(t)}const a=u.value.getUser();s.value=!1,a?(n.value=a,p.value=u.value.getGuild()):(m.value=!0,"client"in o.currentRoute.value.query&&(r.value=parseInt(o.currentRoute.value.query.client,10),f(parseInt(o.currentRoute.value.query.client,10))),"lang"in o.currentRoute.value.query&&R.commit(z.SET_LANGUAGE,o.currentRoute.value.query.lang),"c"in o.currentRoute.value.query&&(g.value=o.currentRoute.value.query.c,await D()))});async function D(){let a;if(!g.value){I.value=E("CANNOT_BE_EMPTY");return}if(!G.test(g.value)){I.value=E("INCORRECT_CODE");return}s.value=!0;try{a=await u.value.checkConnectCode(g.value),a.user.discriminator=="original"&&(r.value=0,f(0))}catch(A){I.value=A.toString(),console.error(A),s.value=!1;return}s.value=!1,m.value=!1,await R.dispatch(k.OPEN_CONFIRM,E("CONFIRM_LOGIN",[a.guild.name,a.user.username])).catch(()=>(m.value=!0,!0))||(s.value=!0,await u.value.connect(a),n.value=u.value.getUser(),p.value=u.value.getGuild(),s.value=!1)}function V(a){u.value.switchAlt(a)}function f(a){s.value=!0,Z(a).then(()=>{s.value=!1})}function M(){R.dispatch(k.OPEN_CONFIRM,E("TID_SETTINGS_DLG_SIGN_OUT")).then(()=>{u.value.logout(),n.value=void 0,p.value=void 0}).catch(()=>{})}return(a,t)=>{const A=le("t");return d(),c("div",null,[e("div",ne,[e("div",ue,[e("div",null,[B(a.$slots,"custom-selector",{},()=>{var l,y,T,b;return[(y=(l=n.value)==null?void 0:l.alts)!=null&&y.length?(d(),c("div",oe,[e("select",{value:C(u).selectedAlt,onChange:t[0]||(t[0]=h=>V(h.target.value))},[e("option",ie,v((T=n.value)==null?void 0:T.username),1),(d(!0),c(X,null,j((b=n.value)==null?void 0:b.alts,(h,F)=>(d(),c("option",{key:F,value:h},v(h),9,ce))),128))],40,re)])):w("",!0)]},!0)]),s.value&&!n.value?(d(),c("div",ve,[e("div",de,[e("img",{src:C(N),alt:"memberImage avatar"},null,8,me),e("img",{src:C(N),alt:"memberImage avatar"},null,8,ge)]),t[8]||(t[8]=e("p",null,null,-1))])):w("",!0),n.value?(d(),c("div",{key:1,class:"logged",onClick:M},[e("div",pe,[e("img",{src:p.value.url,alt:`${p.value.name} icon`,onError:t[1]||(t[1]=l=>l.target.src=C(N))},null,40,Ae),e("img",{src:n.value.avatarUrl,alt:`${n.value.username} avatar`,onError:t[2]||(t[2]=l=>l.target.src=C(N))},null,40,Ce)]),e("div",null,[e("p",null,v(p.value.name),1),e("p",null,v(n.value.username),1)])])):w("",!0),!s.value&&!n.value?(d(),c("div",_e,[_(e("span",null,null,512),[[A,"TID_SETTINGS_DLG_NOT_SIGNED_IN"]]),e("button",{class:"button accent",onClick:t[3]||(t[3]=l=>m.value=!0)},v(a.$t("TID_SETTINGS_DLG_SIGN_IN")),1)])):w("",!0)])]),B(a.$slots,"default",{},void 0,!0),e("div",Ee,[e("div",Ie,[e("p",null,[t[9]||(t[9]=Q("Powered by ",-1)),e("a",{href:S.value,target:"_blank"},"HS Compendium",8,fe)])])]),H(x,{open:m.value,"onUpdate:open":t[7]||(t[7]=l=>m.value=l),title:a.$t("TID_SETTINGS_DLG_SIGN_IN"),size:C(ae).SMALL},{body:W(()=>[e("div",he,[e("p",we,[_(e("span",null,null,512),[[A,"ENTER_CODE"]]),e("span",Ne,v(I.value),1)]),_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>g.value=l)},null,512),[[$,g.value]])]),e("a",{href:S.value,target:"_blank"},v(P.value),9,Re),e("div",Se,[_(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>r.value=l),onChange:t[6]||(t[6]=l=>f(l.target.value))},[...t[10]||(t[10]=[e("option",{value:0},"Default client",-1),e("option",{value:1},"Client from Mentalisit",-1)])],544),[[ee,r.value]])]),e("div",{class:te(["code-req-btn-wrap",{disable:s.value}])},[_(e("button",{class:"button accent",onClick:D},null,512),[[A,"TID_LINK_DEVICE_DLG_SUBMIT_CODE_BTN"]])],2)]),_:1},8,["open","title","size"])])}}}),be=se(De,[["__scopeId","data-v-0daacf58"]]);export{be as C,N as m};
